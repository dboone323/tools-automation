[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/app/logs/supervisord.pid

[program:mcp-server]
command=/usr/local/bin/python3 /app/mcp_server.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/mcp_server.log
stderr_logfile=/app/logs/mcp_server_error.log
environment=PYTHONPATH=/app

[program:autonomous-orchestrator]
command=/bin/bash -c "source /app/autonomous_orchestrator.sh && orchestration_loop"
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/autonomous.log
stderr_logfile=/app/logs/autonomous_error.log

[program:health-monitor]
command=/bin/bash /app/health_monitor.sh
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/health_monitor.log
stderr_logfile=/app/logs/health_monitor_error.log

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/app/logs/nginx.log
stderr_logfile=/app/logs/nginx_error.log

[program:health-check]
command=/usr/local/bin/python3 /app/health_check.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/health_check.log
stderr_logfile=/app/logs/health_check_error.log
environment=HEALTH_CHECK_PORT=8080